clear all
clc

ttfeat(:,:,1) = [
-38.6843 4.3523 -50.6362 -66.1265 -0.9681 -66.1958 -24.6089 -95.1217 4.1532
38.7081 8.6797 -11.9273 -42.9761 17.0185 -28.7417 -2.3001 118.712 7.8899
13.2827 22.6796 -24.2007 -70.6501 -48.1615 -37.0353 -23.2874 -11.6673 -26.3971
-11.7553 -30.1759 -16.3672 -25.7993 55.6961 -59.2501 3.7974 20.194 36.153
93.8646 -39.8512 23.7759 -54.2549 -79.3053 -103.243 -45.9385 59.6234 -42.4971
30.462 18.0324 -6.5002 -35.3579 -19.5897 28.253 -95.9733 -84.2379 -39.8192
-5.5137 94.2546 -29.7177 -15.0827 -74.2343 100.007 -1.8222 20.6574 36.2669
13.8729 -15.3411 -22.1883 -60.022 -17.2314 111.166 -61.2563 25.0873 84.3272
];
ttfeat(:,:,2) = [
-19.3197 -3.9617 -13.9362 -14.1238 26.7651 9.0516 -15.9943 58.6295 26.1497
-25.2539 68.8475 -10.0262 178.493 24.1494 32.874 41.2715 86.7548 33.8393
20.4037 -70.4106 6.8371 170.377 5.4238 29.2123 -11.4646 -18.5848 33.7198
53.6178 7.0616 -44.1674 57.3459 -17.0142 -80.8226 13.1125 59.6432 33.9199
48.3991 64.486 4.1269 39.3629 -46.2924 0.9387 -44.899 47.6824 -15.629
13.5073 -24.7468 -30.1937 -63.9069 0.2661 -21.298 -107.865 -70.7522 18.9622
-31.7203 -31.2412 -18.4364 -29.2297 56.9575 -101.701 4.6958 -1.6678 -112.645
31.4882 -46.6817 -41.9085 -30.9703 21.3681 -66.4276 -47.5591 13.0559 -58.4175
];
ttfeat(:,:,3) = [
60.0983 -10.2382 27.4617 -0.6822 24.742 18.2664 94.5878 39.7354 -21.3481
-33.0369 -48.8903 -108.731 20.6057 -60.7924 120.622 -61.0127 52.1844 3.8834
16.378 -78.6473 7.2307 -46.8575 79.5394 37.0124 -18.8119 40.1092 89.5465
75.4064 -18.5131 33.4517 41.7579 26.3238 15.4873 2.6215 -23.4412 39.8632
-44.4454 -11.0573 -42.4415 54.7269 13.2409 -27.0994 -97.6967 -2.3296 -22.125
-47.9642 -26.7606 -2.8545 16.059 -19.6799 6.1142 28.271 17.6727 -31.4546
-24.636 -13.0986 14.5893 0.7556 -108.816 48.114 3.8897 -62.84 76.6898
22.0528 -54.7707 -30.7309 -58.2246 -59.7827 -12.6987 4.0351 -51.8016 136.677
];
ttfeat(:,:,4) = [
8.372 -32.7023 -31.6344 8.4401 6.7721 -11.4884 98.8283 12.3225 10.6742
-23.9433 63.7477 -52.2855 -77.1898 20.8903 -41.3543 27.233 78.0519 -38.5117
-70.6327 -27.5595 25.2854 -77.5901 40.994 -41.5991 -6.8953 -59.8311 -0.3567
48.7494 -4.3704 16.5977 43.3539 -42.7177 24.895 30.9938 -12.1173 4.6593
14.4859 -17.391 -81.7706 -7.2686 17.8659 115.781 -0.2791 50.2414 46.7626
58.2704 49.6981 -95.342 -19.3121 137.423 -39.6913 55.36 -96.0063 33.1759
-45.4353 21.4218 -2.0199 65.8102 -75.6488 27.048 -9.2795 31.2723 -17.5116
12.0288 -50.2093 34.8597 -39.8232 21.699 -27.9531 -56.0709 37.648 80.9939
];
ttfeat(:,:,5) = [
-2.5417 -83.2822 37.5747 -56.254 -52.3367 -5.5722 -12.7795 -62.2144 -85.644
-40.6349 -20.7964 -34.4714 -49.4487 79.1659 64.7975 35.7557 -7.755 -22.9947
-21.921 -4.2112 22.5407 -75.7929 -12.4707 89.0648 52.4299 -80.7457 54.55
42.9305 4.4626 -78.2512 -111.426 64.701 -3.2807 8.8774 112.303 -8.194
9.7608 72.8074 -3.9398 -7.5761 18.099 -12.784 7.6649 36.9641 -3.362
44.4431 10.9727 -47.0896 58.1372 -13.1526 20.2319 -62.7162 -103.382 -50.0796
3.4611 -5.7439 -32.6431 -9.0968 54.1072 17.5878 -58.64 -57.7275 -27.7831
124.341 3.4301 14.1265 -11.6977 49.1217 40.3756 -73.0721 -5.3596 -67.5778
];
ttfeat(:,:,6) = [
18.2106 5.9255 9.7913 39.8061 2.5506 -71.0363 38.1425 50.1806 -40.8806
-22.6104 47.9737 -7.5566 -75.9011 -22.0216 33.4683 -59.1064 75.5504 -6.3243
39.1683 -17.0465 44.6392 -53.7459 -42.4235 34.1618 29.1924 -56.862 13.2071
61.8618 -8.6659 -18.2095 -153.608 -12.0185 -44.1068 -29.0005 32.1509 157.926
53.8599 30.815 -41.3094 26.0704 30.1465 -75.2254 -28.0684 -0.638 61.3309
-1.7421 43.196 13.8006 -49.5512 -75.8127 21.657 -77.7948 45.713 116.032
-25.1994 -70.8457 22.9899 -12.6563 -3.4174 40.4128 55.0104 55.3847 20.7249
-61.2009 9.9976 -10.8753 50.4633 39.1196 28.9469 8.7529 41.0236 10.5916
];
ttfeat(:,:,7) = [
30.6583 14.4205 -61.2117 49.4689 -21.3564 57.1802 32.6612 6.9144 20.0365
-26.3888 -47.5456 -104.974 -34.4421 25.5404 -45.7357 -25.2537 -18.9204 36.9531
62.0801 -45.5366 -19.5121 -42.8419 -32.8137 8.9901 -23.7997 7.1532 45.0022
-7.8815 -8.0975 33.2141 2.4195 -6.2508 -49.1674 -102.578 80.2519 -76.5609
-68.6801 -24.4451 -35.1132 -33.2427 -26.5233 19.2414 -22.4152 67.4558 25.231
43.5419 -11.1391 25.0664 72.6371 5.2793 16.2849 -77.5598 -22.4221 -43.2107
-78.4267 13.6033 27.0157 68.9923 56.4175 64.8155 46.4913 8.4206 -18.8277
-92.2126 -58.4265 49.5375 4.7568 37.1239 54.9615 45.097 -56.0248 39.4005
];

[masks ~] = createMask9(9,8);
for i = 1:7
    k{i} = ttfeat(:,:,i);
end
feat = cell(9,1);
PatchCov = cell(9,1);
for i = 1:9
    mii = masks{i};
    for ii = 1:7
        c = k{ii}(mii);
        feat{i} =[feat{i} c(:)];
    end
    PatchCov{i} = cov(feat{i});   
end

for i = 1:9
    PatchCov{i}
end
